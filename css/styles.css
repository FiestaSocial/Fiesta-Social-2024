let currentScreen = 1;

// Función para mostrar la pantalla siguiente
function nextScreen(nextScreenNumber) {
    // Validación de la pantalla actual antes de avanzar
    if (currentScreen === 2) {
        if (!validateForm('guestForm')) {
            alert('Por favor, complete todos los campos requeridos.');
            return;
        }
        
        let acompanante = document.getElementById("acompanante").value;
        if (acompanante === "si") {
            let cantidadAcompanantes = document.getElementById("cantidadAcompanantes").value;
            generateAcompanantesForm(cantidadAcompanantes);
            nextScreenNumber = 3;
        } else {
            nextScreenNumber = 4;
        }
    } else if (currentScreen === 3 && !validateForm('acompanantesForm')) {
        alert('Por favor, complete todos los campos requeridos.');
        return;
    } else if (nextScreenNumber === undefined) {
        nextScreenNumber = currentScreen + 1;
    }

    // Ocultar la pantalla actual
    document.getElementById(`screen${currentScreen}`).classList.remove('active');
    
    // Mostrar la nueva pantalla
    document.getElementById(`screen${nextScreenNumber}`).classList.add('active');

    // Actualizar la pantalla actual
    currentScreen = nextScreenNumber;
}

// Función para mostrar la pantalla anterior
function prevScreen(screen) {
    if (currentScreen === 4 && document.getElementById("acompanante").value === "no") {
        screen = 2; // Saltar la pantalla de acompañantes si no hay acompañantes
    }

    document.getElementById(`screen${currentScreen}`).classList.remove('active');
    document.getElementById(`screen${screen}`).classList.add('active');
    currentScreen = screen;
}

// Función para alternar la visibilidad de los campos de acompañantes
function toggleAcompanante() {
    let acompanante = document.getElementById("acompanante").value;
    let acompananteCantidad = document.getElementById("acompananteCantidad");
    if (acompanante === "si") {
        acompananteCantidad.style.display = "block";
    } else {
        acompananteCantidad.style.display = "none";
    }
}

// Generar el formulario de acompañantes
function generateAcompanantesForm(cantidad) {
    let acompanantesForm = document.getElementById("acompanantesForm");
    acompanantesForm.innerHTML = ''; // Limpiar los campos anteriores
    for (let i = 1; i <= cantidad; i++) {
        acompanantesForm.innerHTML += `
            <h3>Acompañante ${i}</h3>
            <label for="nombreAcompanante${i}">Nombre:</label>
            <input type="text" id="nombreAcompanante${i}" name="nombreAcompanante${i}" required><br><br>
        `;
    }
}

// Validación de formularios
function validateForm(formId) {
    let form = document.getElementById(formId);
    return form.checkValidity();
}

// Finalizar registro y mostrar confirmación
function finalizarRegistro() {
    document.getElementById('confirmationModal').style.display = 'none';
    document.getElementById('screen1').classList.add('active');
    currentScreen = 1;
}
